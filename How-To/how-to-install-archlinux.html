<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ArchLinux Installation</title>
  <link rel="stylesheet" href="https://stackedit.io/style.css" />
</head>

<body class="stackedit">
  <div class="stackedit__left">
    <div class="stackedit__toc">
      
<ul>
<li><a href="#archlinux-installation-29092023">ArchLinux Installation (29/09/2023)</a></li>
<li><a href="#installation">Installation</a>
<ul>
<li><a href="#configuration-keyboard">Configuration keyboard</a></li>
<li><a href="#check-if-you-have-uefi-mode-enabled">Check if you have UEFI mode enabled</a></li>
<li><a href="#archlinux-network-for-arch-live-media">ArchLinux Network for Arch Live media</a></li>
<li><a href="#disk-os-detection-partitions-and-format-layout">Disk OS detection, Partitions and format Layout</a></li>
<li><a href="#mount-partitions">Mount Partitions</a></li>
<li><a href="#select-an-appropriate-mirror">Select an appropriate mirror</a></li>
<li><a href="#install-archlinux">Install ArchLinux</a></li>
<li><a href="#archlinux-system-configuration">ArchLinux System Configuration</a></li>
</ul>
</li>
<li><a href="#post-installation">Post-installation</a></li>
<li><a href="#installing-yay-aur-helper-in-archlinux">Installing Yay AUR Helper in ArchLinux</a></li>
</ul>

    </div>
  </div>
  <div class="stackedit__right">
    <div class="stackedit__html">
      <h1 id="archlinux-installation-29092023">ArchLinux Installation <em>(29/09/2023)</em></h1>
<p><strong>A simple, lightweight distribution</strong></p>
<p>You’ve reached the website for Arch Linux, a lightweight and flexible Linux® distribution that tries to Keep It Simple.</p>
<p><strong>Requirements</strong> :</p>
<ul>
<li>
<p>Site : <a href="https://archlinux.org/">archlinux.org/</a></p>
</li>
<li>
<p>Download : <a href="https://archlinux.org/download/">archlinux.org/download/</a></p>
</li>
<li>
<p>Installation Guide : <a href="https://wiki.archlinux.org/title/Installation_guide">wiki.archlinux.org/title/Installation_guide/</a></p>
</li>
<li>
<p>wiki : <a href="https://wiki.archlinux.org/">wiki.archlinux.org/</a></p>
</li>
<li>
<p>AUR : <a href="https://aur.archlinux.org/">aur.archlinux.org/</a> | Go to <a href="#installing-yay-aur-helper-in-archlinux">install <strong>yay</strong> on Archlinux</a></p>
<blockquote>
<p>Welcome to the AUR! Please read the AUR User Guidelines and <a href="https://wiki.archlinux.org/index.php/AUR_User_Guidelines">AUR TU Guidelines</a> for more information. Contributed PKGBUILDs must conform to the <a href="https://wiki.archlinux.org/index.php/Arch_Packaging_Standards">Arch Packaging Standards</a> otherwise they will be deleted! Remember to vote for your favourite packages! Some packages may be provided as binaries in [community].</p>
<p>DISCLAIMER: AUR packages are user produced content. Any use of the provided files is at your own risk.</p>
</blockquote>
</li>
</ul>
<h1 id="installation">Installation</h1>
<p>After the installer decompresses and loads the <code>Linux Kernel</code> you will be automatically thrown to an Arch Linux Bash terminal (<strong>TTY</strong>) with root privileges</p>
<p>How to create an <a href="https://wiki.archlinux.org/title/USB_flash_installation_medium">Arch Linux Installer USB drive</a> (also referred to as “flash drive”, “USB stick”, “USB key”, etc) for booting in BIOS and UEFI systems.</p>
<h2 id="configuration-keyboard">Configuration keyboard</h2>
<p>The default keyboard layout in the live session is US. While most English language keyboards will work just fine, the same cannot be true for French, German and other keyboards.</p>
<p>If you face difficulty, you can list out all the supported keyboard layout :</p>
<pre class=" language-bash"><code class="prism  language-bash"><span class="token function">ls</span> /usr/share/kbd/keymaps/**/*.map.gz  <span class="token comment"># list out all the supported keyboard layout</span>
</code></pre>
<p>And then change the layout to the an appropriate one using <code>loadkeys</code> command. For example, if you want French keyboard, this is what you’ll use :</p>
<pre class=" language-bash"><code class="prism  language-bash">loadkeys fr-latin1  <span class="token comment"># choose french keyboard</span>
</code></pre>
<h2 id="check-if-you-have-uefi-mode-enabled">Check if you have UEFI mode enabled</h2>
<p>Some steps are different for UEFI and non-UEFI systems.You should verify if you have UEFI enabled system or not. Use this command :</p>
<pre class=" language-bash"><code class="prism  language-bash"><span class="token function">ls</span> /sys/firmware/efi/efivars  <span class="token comment"># verify if you have UEFI enabled system or not</span>
</code></pre>
<pre class=" language-bash"><code class="prism  language-bash">efivar -L  <span class="token comment"># tools and libraries to work with EFI variables</span>
</code></pre>
<p><strong>If this directory exists, you have a UEFI enabled system.</strong></p>
<h2 id="archlinux-network-for-arch-live-media">ArchLinux Network for Arch Live media</h2>
<ul>
<li>
<p><a href="https://wiki.archlinux.org/title/Network_configuration"><strong>Wired</strong></a> connection:</p>
<p>Check ArchLinux Network</p>
<pre class=" language-bash"><code class="prism  language-bash">ip a  <span class="token comment"># show all interface "ip link" or "ip addr"</span>
<span class="token function">ping</span> -c5 google.com  <span class="token comment"># test your connection</span>
</code></pre>
</li>
<li>
<p><a href="https://wiki.archlinux.org/title/Iwd"><strong>Wifi</strong></a> connection:</p>
<ul>
<li>To get an interactive prompt do:</li>
</ul>
<pre class=" language-bash"><code class="prism  language-bash">iwctl
</code></pre>
<ul>
<li>Connect to a network:<br>
First, if you do not know your wireless device name, list all Wi-Fi devices:<pre class=" language-bash"><code class="prism  language-bash"><span class="token punctuation">[</span>iwd<span class="token punctuation">]</span>: device list  <span class="token comment"># show interface like "wlan0" or something</span>
</code></pre>
Then, to scan for networks:<pre class=" language-bash"><code class="prism  language-bash"><span class="token punctuation">[</span>iwd<span class="token punctuation">]</span>: station <span class="token operator">&lt;</span>device<span class="token operator">&gt;</span> scan
</code></pre>
You can then list all available networks:<pre class=" language-bash"><code class="prism  language-bash"><span class="token punctuation">[</span>iwd<span class="token punctuation">]</span>: station <span class="token operator">&lt;</span>device<span class="token operator">&gt;</span> get-networks
</code></pre>
Finally, to connect to a network:<pre class=" language-bash"><code class="prism  language-bash"><span class="token punctuation">[</span>iwd<span class="token punctuation">]</span>: station <span class="token operator">&lt;</span>device<span class="token operator">&gt;</span> connect <span class="token operator">&lt;</span>SSID<span class="token operator">&gt;</span>
</code></pre>
<strong>If a passphrase is required, you will be prompted to enter it</strong>. Alternatively, you can supply it as a command line argument:</li>
</ul>
</li>
</ul>
<pre class=" language-bash"><code class="prism  language-bash">iwctl --passphrase <span class="token operator">&lt;</span>passphrase<span class="token operator">&gt;</span> station <span class="token operator">&lt;</span>device<span class="token operator">&gt;</span> connect <span class="token operator">&lt;</span>SSID<span class="token operator">&gt;</span>
</code></pre>
<h2 id="disk-os-detection-partitions-and-format-layout">Disk OS detection, Partitions and format Layout</h2>
<p>We’ll start to configure the Hard Disk partitions. For this stage you can run <code>cfdisk</code>, <code>cgdisk</code>, parted or <code>gdisk</code> utilities to perform a disk partition layout for a GPT disk.</p>
<pre class=" language-bash"><code class="prism  language-bash">lsblk  <span class="token comment"># show your disk with partitions</span>
</code></pre>
<h3 id="os-detection">OS detection</h3>
<p>If, you are OS on yout disk use <code>gdisk</code> to zap data structure.</p>
<pre class=" language-bash"><code class="prism  language-bash">gdisk -l /dev/sda  <span class="token comment"># show partion and follow to destroy it</span>
</code></pre>
<p>Press <code>x</code> for extra functionality, after that press <code>z</code> for zap data structure.</p>
<p>Here’s a table with some handy <code>gdisk</code> commands, for destroy GPT structure and blank out MBR.</p>

<table>
<thead>
<tr>
<th align="center">Command</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">x</td>
<td>extra functionality (expert only)</td>
</tr>
<tr>
<td align="center">z</td>
<td>zap (destroy) GPT data structure and exit</td>
</tr>
<tr>
<td align="center"></td>
<td></td>
</tr>
<tr>
<td align="center">p</td>
<td>Print partitions table</td>
</tr>
<tr>
<td align="center">d</td>
<td>Delete partition</td>
</tr>
<tr>
<td align="center">w</td>
<td>Write partition</td>
</tr>
<tr>
<td align="center">q</td>
<td>Quit</td>
</tr>
<tr>
<td align="center">?</td>
<td>Help</td>
</tr>
</tbody>
</table><h3 id="creation-of-the-partitions">Creation of the partitions</h3>
<p>Personally, i use <code>cgdisk</code></p>
<pre class=" language-bash"><code class="prism  language-bash">cgdisk /dev/sda  <span class="token comment"># start partitioning /dev/sda disk</span>
</code></pre>
<p>For a basic partition, the layout table uses the following structure. For that example, I’ll create <strong>3 or 4 partitions</strong>, described on the following table:</p>
<ul>
<li>
<p><code>Boot</code> Partition :</p>
<ul>
<li>EFI System partition (Code: <em>EF00</em>) (/dev/sda1) with 512MiB size, FAT32 formatted.</li>
</ul>
<p><em><strong>OR</strong></em></p>
<ul>
<li>BIOS System partition (Code: <em>EF02</em>) (/dev/sda1) with 512MiB size, FAT32 formatted.</li>
</ul>
</li>
<li>
<p><code>Swap</code> partition <strong>or</strong> <a href="#swapfile-creation"><code>swapfile</code></a> (Code: <em>8200</em>)(/dev/sda2) with 2xRAM recommended size, Swap On.</p>
</li>
<li>
<p><code>Root</code> partition (Code: <em>8300</em>)(/dev/sda3) with at least 35GiB size or rest of HDD space, ext4 formatted.</p>
</li>
<li>
<p><code>Home</code> partition (Code: <em>8300</em>)(/dev/sda4) with the rest of HDD space, ext4 formatted.</p>
</li>
</ul>
<p>You can also review the partition table summary</p>
<pre class=" language-bash"><code class="prism  language-bash"><span class="token function">fdisk</span> -l /dev/sda  <span class="token comment"># review the partition table summary</span>
</code></pre>
<h3 id="format-partitions">Format partitions</h3>
<p>It’s time to format the partitions with the required file systems. Issue the following commands to create a <code>FAT32</code> file system for <code>EFI System</code> or <code>BIOS System</code> partition (/dev/sda1), to create the <code>EXT4</code> file system for the root partition (/dev/sda3) and the home parttion (/dev/sda4) and create the <code>swap</code> partition for /dev/sda2.</p>
<pre class=" language-bash"><code class="prism  language-bash">mkfs.fat -F32 /dev/sda1  <span class="token comment"># create a FAT32 file system for EFI System partition or BIOS partion</span>
mkfs.ext4 /dev/sda3  <span class="token comment"># create the EXT4 file system for the root partition</span>
mkfs.ext4 /dev/sda4  <span class="token comment"># create the EXT4 file system for the home partition</span>
mkswap /dev/sda2  <span class="token comment"># create the swap partition</span>
swapon /dev/sda2  <span class="token comment"># the swap partition needs to be initialized</span>
</code></pre>
<h2 id="mount-partitions">Mount Partitions</h2>
<p>In order to install Arch Linux, the <code>/(root)</code> partition must be mounted to <code>/mnt</code> directory mount point in order to be accessible.</p>
<pre class=" language-bash"><code class="prism  language-bash"><span class="token function">mount</span> /dev/sda3 /mnt
<span class="token function">mkdir</span> /mnt/home
<span class="token function">mount</span> /dev/sda4 /mnt/home
<span class="token comment">#mkdir /mnt/boot  # create a folder only if you use the systemd like Bootloader</span>
<span class="token comment">#mount /dev/sda1 /mnt/boot  # only if you use systemd like Bootloader</span>
</code></pre>
<p>Verity the mountpoint with <code>lsblk</code>.</p>
<pre class=" language-bash"><code class="prism  language-bash">lsblk  <span class="token comment"># check the mountpomit for root partition, home partition and swap partition</span>
</code></pre>
<h2 id="select-an-appropriate-mirror">Select an appropriate mirror</h2>
<p>You can edit <code>/etc/pacman.d/mirrorlist</code> file and select the closest mirror website on top of the mirror file list.</p>
<pre class=" language-bash"><code class="prism  language-bash"><span class="token function">cp</span> -v /etc/pacman.d/mirrorlist /etc/pacman.d/mirrorlist.backup  <span class="token comment"># make backup</span>
</code></pre>
<ul>
<li>
<p><strong>Reflector</strong> too that you can use to list the fresh and fast mirrors located in your country.</p>
<pre class=" language-bash"><code class="prism  language-bash">reflector --list-countries  <span class="token comment"># display a table of the distribution of servers by country</span>
</code></pre>
<p>Now, get the good mirror list with reflector and save it to mirrorlist. You can change the country from US to your own country.</p>
<pre class=" language-bash"><code class="prism  language-bash">reflector -c <span class="token string">"US"</span> --fastest 12 --latest 10 --number 12 --protocol https --completion-percent 100 --sort rate --save /etc/pacman.d/mirrorlist
</code></pre>
</li>
<li>
<p><strong>Rankmirror</strong> same thing than reflector, but this is the old way.</p>
<pre class=" language-bash"><code class="prism  language-bash">pacman -Sy pacman-contrib  <span class="token comment"># update and install rankmirror</span>
</code></pre>
<pre class=" language-bash"><code class="prism  language-bash">rankmirror -n 8 /etc/pacman.d/mirrorlist.backup <span class="token operator">&gt;</span> /etc/pacman.d/mirrorlist  <span class="token comment"># generate mirrorlist</span>
</code></pre>
</li>
</ul>
<p>You can also enable <strong>Arch Multilib</strong> support for the live system by uncommenting the following lines from <code>/etc/pacman.conf</code> file.</p>
<pre class=" language-properties"><code class="prism  language-properties">[multilib]
<span class="token attr-name">Include</span> <span class="token punctuation">=</span> <span class="token attr-value">/etc/pacman.d/mirrorlist</span>
</code></pre>
<p>After that, Update pacman for multilib</p>
<pre class=" language-bash"><code class="prism  language-bash">pacman -Syy
</code></pre>
<h2 id="install-archlinux">Install ArchLinux</h2>
<p>Next, start installing Arch Linux by issuing the following command.</p>
<pre class=" language-bash"><code class="prism  language-bash">pacstrap -K -i /mnt base base-devel linux linux-headers linux-firmware <span class="token function">nano</span> bash-completion
</code></pre>
<blockquote>
<p><strong>Options pacstrap:</strong><br>
-K : Initialize an empty pacman keyring in the target (implies -G).<br>
-i : Prompt for package confirmation when needed (run interactively).<br>
<strong>Packages:</strong><br>
base : Minimal package set to define a basic Arch Linux installation<br>
base-devel : 	Basic tools to build Arch Linux packages<br>
linux : The Linux kernel and modules or others like (linux-lts, linux-zen)<br>
linux-headers : Headers and scripts for building modules for the Linux kernel<br>
linux-firmware : Firmware files for Linux<br>
nano : Pico editor clone with enhancements<br>
bash-completion : Programmable completion for the bash shell</p>
</blockquote>
<p>To install the LTS kernel and Linux LTS headers : <code>linux-lts</code> and <code>linux-lts-headers</code>.<br>
For more information see <a href="https://wiki.archlinux.org/title/kernel#Officially_supported_kernels">Officially supported kernels</a></p>
<p>After the installation completes, generate <code>fstab</code> file for your new Arch Linux system by issuing the following command.</p>
<pre class=" language-bash"><code class="prism  language-bash">genfstab -U -p /mnt <span class="token operator">&gt;&gt;</span> /mnt/etc/fstab
</code></pre>
<p>Subsequently, inspect fstab file content by running the below command.</p>
<pre class=" language-bash"><code class="prism  language-bash"><span class="token function">cat</span> /mnt/etc/fstab
</code></pre>
<h2 id="archlinux-system-configuration">ArchLinux System Configuration</h2>
<h3 id="network-configuration">Network configuration</h3>
<p>In order to further <strong>configure Arch Linux, you must chroot into <code>/mnt</code></strong> the system path and add a hostname for your system by issuing the below commands.</p>
<pre class=" language-bash"><code class="prism  language-bash">arch-chroot /mnt  <span class="token comment"># Arch Linux system on the disk.</span>
<span class="token keyword">echo</span> <span class="token string">"arch"</span> <span class="token operator">&gt;</span> /etc/hostname  <span class="token comment"># add a hostname for your system</span>
<span class="token function">cat</span> /etc/hostname  <span class="token comment"># check hostname</span>
</code></pre>
<p>And edit this <code>/etc/hosts</code> file with Vim or Nano editor to add the following lines to it</p>
<pre class=" language-configure"><code class="prism  language-configure">127.0.0.1   localhost
::1     localhost
127.0.1.1   myhostname.localdomain  myhostname
</code></pre>
<h3 id="solid-state-drive---trim-support">Solid state drive - TRIM support</h3>
<p>Most SSDs support the <code>ATA_TRIM command</code> for sustained long-term performance and wear-leveling.</p>
<blockquote>
<p><strong>Warning: Users need to be certain that their SSD supports TRIM before attempting to use it. Data loss can occur otherwise!</strong></p>
</blockquote>
<p>To verify TRIM support, run:</p>
<pre class=" language-bash"><code class="prism  language-bash">lsblk --discard  <span class="token comment"># if DISC-GRAN and DISC-MAX = Non-zero values indicate TRIM support</span>
</code></pre>
<p>And check the values of DISC-GRAN (discard granularity) and DISC-MAX (discard max bytes) columns. Non-zero values indicate TRIM support.</p>
<p>Alternatively, install <code>hdparm</code> package and run:</p>
<pre class=" language-bash"><code class="prism  language-bash">hdparm -I /dev/sda <span class="token operator">|</span> <span class="token function">grep</span> TRIM
    *    Data Set Management TRIM supported <span class="token punctuation">(</span>limit 8 block<span class="token punctuation">)</span>
</code></pre>
<p>The <a href="https://archlinux.org/packages/?name=util-linux"><code>util-linux</code></a> package provides <code>fstrim.service</code> and <code>fstrim.timer</code> systemd unit files. Enabling the timer will activate the service weekly. The service executes fstrim(8) on all mounted filesystems on devices that support the discard operation.</p>
<pre class=" language-bash"><code class="prism  language-bash">systemctl <span class="token function">enable</span> fstrim.timer
</code></pre>
<h3 id="setting-up-locale">Setting up Locale</h3>
<p>Next, <strong>configure your system Language</strong>. Choose and uncomment your preferred encoding languages from <code>/etc/locale.gen</code> file then set your locale by running the following commands.</p>
<pre class=" language-bash"><code class="prism  language-bash"><span class="token function">nano</span> /etc/locale.gen
</code></pre>
<p>the locale.gen file excerpt:</p>
<pre class=" language-bash"><code class="prism  language-bash">en_US.UTF-8 UTF-8
en_US ISO-8859-1
</code></pre>
<p>Generate your system language layout.</p>
<pre class=" language-bash"><code class="prism  language-bash">locale-gen  <span class="token comment"># Generate your system language layout</span>
<span class="token keyword">echo</span> LANG<span class="token operator">=</span>en_US.UTF-8 <span class="token operator">&gt;</span> /etc/locale.conf  <span class="token comment"># Configuration file for locale settings</span>
<span class="token function">export</span> LANG<span class="token operator">=</span>en_US.UTF-8
</code></pre>
<h3 id="setting-timezone">Setting Timezone</h3>
<p>The next step is to <strong>configure your system time zone</strong> by creating a symlink for your sub time zone (<code>/usr/share/zoneinfo/Continent/Main_city</code>) to <code>/etc/localtime</code> file path.</p>
<pre class=" language-bash"><code class="prism  language-bash"><span class="token function">ls</span> /usr/share/zoneinfo/  <span class="token comment"># listing time zone by continent</span>
<span class="token function">ln</span> -s /usr/share/zoneinfo/Europe/Paris /etc/localtime  <span class="token comment"># creating a symlink for your sub time zone</span>
</code></pre>
<p>You should also <strong>configure the hardware clock to use UTC</strong> (the hardware clock is usually set to the local time).</p>
<pre class=" language-bash"><code class="prism  language-bash">hwclock --systohc --utc  <span class="token comment"># configure the hardware clock to use UTC</span>
</code></pre>
<h3 id="enable-arch-multilib">Enable Arch Multilib</h3>
<p>Like many famous Linux distributions, Arch Linux uses repo mirrors for different world locations and multiple system architectures.</p>
<p>The standard repositories are enabled by default, but if you want <strong>to activate Multilib repositories you must uncomment <code>[multilib]</code> directives from <code>/etc/pacman.conf</code></strong> file, as shown in the below excerpt.</p>
<pre class=" language-properties"><code class="prism  language-properties">[multilib]
<span class="token attr-name">Include</span> <span class="token punctuation">=</span> <span class="token attr-value">/etc/pacman.d/mirrorlist</span>
</code></pre>
<p>After the repository file has been edited, synchronize and update database mirrors and packages by running the below command.</p>
<pre class=" language-bash"><code class="prism  language-bash">pacman -Syu  <span class="token comment"># synchronize and update database mirrors and packages</span>
</code></pre>
<h3 id="set-up-root-and-user-passwd">Set up <code>root</code> and <code>user</code> passwd</h3>
<p>Next, <code>set up a password for the root account</code> and <code>create a new user with Sudo privileges</code> in the Arch box by issuing the commands below.</p>
<pre class=" language-bash"><code class="prism  language-bash"><span class="token function">passwd</span>  <span class="token comment"># set up a password for the root account</span>

<span class="token comment"># create new user in groups and with bash like shell</span>
<span class="token function">useradd</span> -mg <span class="token function">users</span> -G wheel,storage,power -s /bin/bash your_new_user
<span class="token function">passwd</span> your_new_user  <span class="token comment"># set up a password for the user account</span>
</code></pre>
<ul>
<li>
<p>Optional :<br>
Also, expire the user password in order to force the new user to change the password at first login.</p>
<pre class=" language-bash"><code class="prism  language-bash">chage -d 0 <span class="token operator">&lt;</span>your_new_user<span class="token operator">&gt;</span>
</code></pre>
</li>
</ul>
<h3 id="enable-sudo-privileges-sudoersvisudo">Enable Sudo Privileges <em>(sudoers/visudo)</em></h3>
<p>After the new user has been added you need to install the sudo package and <code>update the wheel group</code> line from <code>/etc/sudoers</code> file in order to grant root privileges to the newly added user.</p>
<p>Open <code>/etc/sudoers</code> file with EDITOR:</p>
<pre class=" language-bash"><code class="prism  language-bash">EDITOR<span class="token operator">=</span>vim visudo
</code></pre>
<p>uncomment this line to <code>/etc/sudoers</code> file:</p>
<pre class=" language-properties"><code class="prism  language-properties"><span class="token attr-name">%wheel</span> <span class="token attr-value">ALL=(ALL) ALL</span>
</code></pre>
<p>Add this line at bottom to <code>/etc/sudoers</code> file and save/quit:</p>
<pre class=" language-properties"><code class="prism  language-properties"><span class="token attr-name">Defaults</span> <span class="token attr-value">rootpw  # You are asked for the root password if you use the sudo command</span>
</code></pre>
<blockquote>
<p><strong>Reduce the number of times you have to type a password</strong></p>
<p>If you are annoyed that you have to <strong>re-enter your password every 5 minutes (default)</strong>, you can change this by setting a longer value for <code>timestamp_timeout</code> (in minutes):</p>
<pre class=" language-properties"><code class="prism  language-properties"><span class="token attr-name">Defaults</span> <span class="token attr-value">timestamp_timeout=10</span>
</code></pre>
</blockquote>
<h3 id="install-grub-bootloader">Install Grub bootloader</h3>
<p>This is one of the crucial steps and it differs for <strong><code>UEFI</code></strong> and <strong><code>non-UEFI</code></strong> systems.</p>
<p>Let me show it for the UEFI systems first.</p>
<ul>
<li>
<p><strong>UEFI</strong></p>
<p><strong>Make sure that you are still using arch-chroot</strong>. Install required packages:</p>
<pre class=" language-bash"><code class="prism  language-bash">pacman -S grub os-prober efibootmgr  <span class="token comment"># install required packages for UEFI system</span>
</code></pre>
<p>Create the directory where EFI partition will be mounted:</p>
<pre class=" language-bash"><code class="prism  language-bash"><span class="token function">mkdir</span> /boot/efi
</code></pre>
<p>Now, mount the <a href="https://wiki.archlinux.org/title/EFI_system_partition">ESP</a> partition you had created</p>
<pre class=" language-bash"><code class="prism  language-bash"><span class="token function">mount</span> /dev/sda1 /boot/efi
</code></pre>
<p>Install grub like this:</p>
<pre class=" language-bash"><code class="prism  language-bash">grub-install --target<span class="token operator">=</span>x86_64-efi --bootloader-id<span class="token operator">=</span>GRUB --efi-directory<span class="token operator">=</span>/boot/efi
</code></pre>
<p>One last step, generate the main configuration file <code>/boot/grub/grub.cfg</code>:</p>
<pre class=" language-bash"><code class="prism  language-bash">grub-mkconfig -o /boot/grub/grub.cfg
</code></pre>
</li>
<li>
<p><strong>non-UEFI</strong></p>
<p><strong>Make sure that you are still using arch-chroot</strong>. Install <code>grub</code> package first:</p>
<pre class=" language-bash"><code class="prism  language-bash">pacman -S grub os-prober  <span class="token comment"># install just grub required packages for non-UEFI system</span>
</code></pre>
<p>And then install grub like this (don’t put the disk number sda1, just the disk name sda):</p>
<pre class=" language-bash"><code class="prism  language-bash">grub-install --target<span class="token operator">=</span>i386-pc /dev/sda
</code></pre>
<p>One last step, generate the main configuration file <code>/boot/grub/grub.cfg</code>:</p>
<pre class=" language-bash"><code class="prism  language-bash">grub-mkconfig -o /boot/grub/grub.cfg
</code></pre>
</li>
</ul>
<p><strong>If error: will not proceed with blocklists</strong><br>
You need to use the <code>--force</code> option to allow usage of blocklists.<br>
Without <code>--force</code> you may get the below error and grub-setup will not setup its boot code in the partition boot sector:</p>
<pre class=" language-bash"><code class="prism  language-bash">/sbin/grub-setup: error: will not proceed with blocklists
</code></pre>
<p>With <code>--force</code> you should get:</p>
<pre class=" language-bash"><code class="prism  language-bash">Installation finished. No error reported.
</code></pre>
<p>For more see <a href="https://wiki.archlinux.org/title/GRUB/Tips_and_tricks">GRUB/Tips and tricks</a></p>
<h3 id="configure-dhcpcd">Configure DHCPCD</h3>
<p>This article describes how to configure network connections on OSI layer 3 and above. Medium-specifics are handled in the <code>/Ethernet</code> and <a href="https://wiki.archlinux.org/title/Network_configuration/Wireless"><code>/Wireless</code></a> subpages.</p>
<p>Install the <code>dhcpcd</code> package.</p>
<pre class=" language-bash"><code class="prism  language-bash">pacman -S dhcpcd
</code></pre>
<ul>
<li>
<p>To start the daemon for <strong>all network interfaces</strong>, <code>start</code>/<code>enable</code> <code>dhcpcd.service</code>.<br>
Issuing the below commands.</p>
<pre class=" language-bash"><code class="prism  language-bash">systemctl start dhcpcd.service
systemctl <span class="token function">enable</span> dhcpcd.service
</code></pre>
</li>
<li>
<p>To start the daemon for a <strong>specific interface</strong> alone, <code>start</code>/<code>enable</code> the template unit <code>dhcpcd@interface.service</code></p>
<p>Both wired and wireless interface names can be found via ls <code>/sys/class/net</code> or <code>ip link</code>. Note that <code>lo</code> is the virtual loopback interface and not used in making network connections.</p>
<p>To show the status of the interfaces:</p>
<pre class=" language-bash"><code class="prism  language-bash">ip <span class="token function">link</span>
</code></pre>
<p>To check the status of the interface <code>ens33</code> or <code>enp2s1</code>:</p>
<pre class=" language-properties"><code class="prism  language-properties"><span class="token attr-name">2</span><span class="token punctuation">:</span> <span class="token attr-value">ens33: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast master br0 state DOWN mode DEFAULT qlen 1000</span>
...
</code></pre>
<p>The <code>UP</code> in <code>&lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt;</code> is what indicates the interface is up, not the later <code>state DOWN</code>.</p>
<p>Issuing the below commands.</p>
<pre class=" language-bash"><code class="prism  language-bash">systemctl start dhcpcd@<span class="token operator">&lt;</span>interface<span class="token operator">&gt;</span>.service  <span class="token comment"># interface: ens33 or enp2s1 maybe</span>
systemctl <span class="token function">enable</span> dhcpcd@<span class="token operator">&lt;</span>interface<span class="token operator">&gt;</span>.service
</code></pre>
</li>
</ul>
<h3 id="configure-networkmanager">Configure NetworkManager</h3>
<p><a href="https://wiki.archlinux.org/title/NetworkManager">NetworkManager</a> is a program for providing detection and configuration for systems to automatically connect to networks. NetworkManager’s functionality can be useful for both wireless and wired networks.</p>
<p>Install the networkmanager package.</p>
<pre class=" language-bash"><code class="prism  language-bash">pacman -S networkmanager
</code></pre>
<p>You will need to enable <code>NetworkManager.service</code>:</p>
<pre class=" language-bash"><code class="prism  language-bash">systemctl <span class="token function">enable</span> NetworkManager.service
</code></pre>
<h3 id="swapfile-creation">Swapfile creation</h3>
<p>You probably have noticed that I have not created a Swap partition. This is because I recommend to use a Swap file. Let’s <a href="https://wiki.archlinux.org/title/swap#Swap_file_creation">create a swap file for this Arch Linux</a> installation too.</p>
<p>Create a Swap file of 8G or whatever your RAM size is:</p>
<pre class=" language-bash"><code class="prism  language-bash">fallocate -l 8G /swapfile
</code></pre>
<p>Change its access rules, format and enable it:</p>
<pre class=" language-bash"><code class="prism  language-bash"><span class="token function">chmod</span> 600 /swapfile
mkswap /swapfile
swapon /swapfile
</code></pre>
<p>Also, add this Swap file to the <code>/etc/fstab</code>:</p>
<pre class=" language-bash"><code class="prism  language-bash"><span class="token keyword">echo</span> <span class="token string">'/swapfile none swap sw 0 0'</span> <span class="token operator">&gt;&gt;</span> /etc/fstab
</code></pre>
<p>And check if the Swap file is working:</p>
<pre class=" language-bash"><code class="prism  language-bash"><span class="token function">free</span> -m
swapon --show
</code></pre>
<h3 id="driver-cpu-and-gpu">Driver CPU and GPU</h3>
<ol>
<li>
<p><strong>Install CPU <a href="https://wiki.archlinux.org/title/Microcode">Microcode</a></strong></p>
<ul>
<li>For <code>Intel</code> processors:<pre class=" language-bash"><code class="prism  language-bash">pacman -S intel-ucode
</code></pre>
</li>
<li>For <code>AMD</code> processors:<pre class=" language-bash"><code class="prism  language-bash">pacman -S amd-ucode
</code></pre>
</li>
</ul>
</li>
<li>
<p><strong>Install <em>NVIDIA</em> driver</strong></p>
</li>
</ol>
<p>This article covers the proprietary <a href="https://wiki.archlinux.org/title/NVIDIA">NVIDIA</a> graphics card driver.</p>
<p>These instructions are for those using the stock <a href="https://archlinux.org/packages/?name=linux">linux</a> or <a href="https://archlinux.org/packages/?name=linux-lts">linux-lts</a> packages. For custom kernel setup, skip to the <a href="https://wiki.archlinux.org/title/NVIDIA#Custom_kernel">next</a> subsection.</p>
<blockquote>
<p>The <code>nvidia</code> package (for use with the <code>linux</code> kernel) <strong>or</strong> <code>nvidia-lts</code> (for use with the <code>linux-lts</code> kernel) package.</p>
</blockquote>
<ul>
<li>
<p><strong>Install</strong> the <code>nvidia-dkms</code> package (or a specific branch). The Nvidia module will be rebuilt after every Nvidia or kernel update thanks to the DKMS.</p>
</li>
<li>
<p><strong>Install</strong> NVIDIA drivers utilities : <code>nvidia-utils</code> and <code>lib32-nvidia-utils</code></p>
</li>
<li>
<p><strong>Install</strong> OpenCL implemention for NVIDIA : <code>opencl-nvidia</code> and <code>lib32-opencl-nvidia</code></p>
</li>
<li>
<p><strong>Install</strong> The GL Vendor-Neutral Dispatch library : <code>libglvnd</code> and <code>lib32-libglvnd</code></p>
</li>
<li>
<p><strong>Install</strong> Tool for configuring the NVIDIA graphics driver : <code>nvidia-settings</code></p>
</li>
<li>
<p>To avoid the possibility of forgetting to update <a href="https://wiki.archlinux.org/title/Initramfs">initramfs</a> after an NVIDIA driver upgrade, you may want to use a <a href="https://wiki.archlinux.org/title/NVIDIA#Pacman_hook">pacman hook</a>.</p>
</li>
<li>
<p><a href="https://wiki.archlinux.org/title/NVIDIA#Hardware_accelerated_video_decoding">Hardware accelerated video decoding</a></p>
</li>
<li>
<p><a href="https://wiki.archlinux.org/title/NVIDIA#Hardware_accelerated_video_encoding_with_NVENC">Hardware accelerated video encoding with NVENC</a></p>
</li>
</ul>
<p>Conclusion :</p>
<pre class=" language-bash"><code class="prism  language-bash">pacman -S nvidia-dkms nvidia-utils lib32-nvidia-utils opencl-nvidia lib32-opencl-nvidia libglvnd lib32-libglvnd nvidia-settings
</code></pre>
<ol start="3">
<li><strong>Install <em>AMD</em> driver</strong></li>
</ol>
<p><a href="https://wiki.archlinux.org/title/AMDGPU">AMDGPU</a> is the open source graphics driver for AMD Radeon graphics cards from the Graphics Core Next family.</p>
<p>Install the <code>mesa</code> package, which provides the DRI driver for 3D acceleration.</p>
<ul>
<li>
<p>For 32-bit application support, also install the <code>lib32-mesa</code> package from the <a href="#enable-arch-multilib"><code>multilib</code></a> repostory.</p>
</li>
<li>
<p>For the DDX driver (which provides 2D acceleration in Xorg), install the <code>xf86-video-amdgpu</code> package.</p>
</li>
<li>
<p>For <a href="https://wiki.archlinux.org/title/Vulkan">Vulkan</a> support, install the <code>vulkan-radeon</code> or <code>amdvlk</code> package. Optionally install the <code>lib32-vulkan-radeon</code> or <code>lib32-amdvlk</code> package for 32-bit application support.</p>
</li>
</ul>
<p>Support for <a href="https://wiki.archlinux.org/title/AMDGPU#Video_acceleration">accelerated video decoding</a> is provided by <code>libva-mesa-driver</code> and <code>lib32-libva-mesa-driver</code> for VA-API and <code>mesa-vdpau</code> and <code>lib32-mesa-vdpau</code> packages for VDPAU.</p>
<p>Conclusion :</p>
<pre class=" language-bash"><code class="prism  language-bash">pacman -S mesa lib32-mesa xf86-video-amdgpu vulkan-radeon amdvlk lib32-vulkan-radeon lib32-amdvlk libva-mesa-driver lib32-libva-mesa-driver mesa-vdpau lib32-mesa-vdpau
</code></pre>
<ol start="4">
<li><strong>Intel graphics</strong></li>
</ol>

    Installation - Intel graphics
<pre><code>Since Intel provides and supports open source drivers, Intel graphics are essentially plug-and-play.

```bash
# See https://wiki.archlinux.org/title/intel_graphics#Installation
pacman -S mesa lib32-mesa xf86-video-intel
```
</code></pre>

<h3 id="install-display-server">Install display server</h3>
<p><code>mesa</code> is an open-source implementation of the OpenGL specification.</p>
<pre class=" language-bash"><code class="prism  language-bash">pacman -S --needed mesa lib32-mesa
</code></pre>
<p><a href="https://wiki.archlinux.org/title/xorg">Xorg</a> can be installed with the <code>xorg-server</code> package. Additionally, some packages from the <code>xorg-apps</code> group are necessary for certain configuration tasks, they are pointed out in the relevant sections.</p>
<p>Finally, an <code>xorg</code> group is also available, which includes Xorg server packages, packages from the <code>xorg-apps</code> group and fonts.</p>
<pre class=" language-bash"><code class="prism  language-bash">pacman -S xorg-server xorg-apps xorg-xinit xorg-twm xorg-xclock xterm
</code></pre>
<h3 id="install-a-desktop-environment">Install a desktop environment</h3>
<ol>
<li>
<p>A <a href="https://wiki.archlinux.org/title/Desktop_environment">desktop environment</a> (DE) is an implementation of the <a href="https://en.wikipedia.org/wiki/Desktop_metaphor">desktop metaphor</a> made of a bundle of programs, which share a common graphical user interface (GUI).</p>
<p>Before installing <code>Plasma</code>, <strong>make sure you have a working Xorg installation on your system</strong>.</p>
<p>Install the <a href="https://archlinux.org/packages/?name=plasma-meta"><code>plasma-meta</code></a> meta-package or the <a href="https://archlinux.org/groups/x86_64/plasma/"><code>plasma</code></a> group. For differences between <code>plasma-meta</code> and <code>plasma</code> reference Package group. Alternatively, for a more minimal Plasma installation, install the <a href="https://archlinux.org/packages/?name=plasma-desktop"><code>plasma-desktop</code></a> package.</p>
<p>In my case i use <code>plasma</code>:</p>
<pre class=" language-bash"><code class="prism  language-bash">pacman -S plasma
</code></pre>
<p>For the installation of other desktop environments, here is a non-exhaustive list:</p>
<ul>
<li>
<p>To install <a href="https://wiki.archlinux.org/title/GNOME">GNOME</a>: <code>gnome</code> <code>gnome-extra</code></p>
</li>
<li>
<p>To install <a href="https://wiki.archlinux.org/title/Cinnamon">Cinnamon</a>: <code>cinnamon</code> <code>nemo-fileroller</code></p>
</li>
<li>
<p>To install <a href="https://wiki.archlinux.org/title/Xfce">XFCE</a>: <code>xfce4</code> <code>xfce4-goodies</code></p>
</li>
<li>
<p>To install <a href="https://wiki.archlinux.org/title/MATE">MATE</a>: <code>mate</code> <code>mate-extra</code></p>
</li>
<li>
<p>To install <a href="https://wiki.archlinux.org/title/Deepin_Desktop_Environment">Deepin</a>: <code>deepin</code> <code>deepin-extra</code></p>
</li>
<li>
<p>To install <a href="https://wiki.archlinux.org/title/Budgie">Budgie</a>: <code>budgie-desktop</code> <code>budgie-extras</code></p>
</li>
<li>
<p>To install <a href="https://wiki.archlinux.org/title/i3">i3-wm</a>: <code>i3-wm</code> <code>i3lock</code> <code>i3status</code> <code>i3blocks</code> <code>dmenu</code></p>
</li>
</ul>
</li>
<li>
<p>A <a href="https://wiki.archlinux.org/title/Display_manager">display manager</a>, or login manager, is typically a graphical user interface that is displayed at the end of the boot process in place of the default shell.</p>
<pre class=" language-bash"><code class="prism  language-bash">pacman -S sddm
</code></pre>
<p>To start <code>SDDM</code> at boot time enable <code>sddm.service</code>.</p>
<pre class=" language-bash"><code class="prism  language-bash">systemctl <span class="token function">enable</span> sddm.service
</code></pre>
<p>For the installation of other <strong>graphical</strong> display manager, here is a non-exhaustive list:</p>
<ul>
<li>
<p>To install KDE Plasma: <a href="https://wiki.archlinux.org/title/SDDM"><code>SDDM</code></a></p>
</li>
<li>
<p>To install GNOME: <a href="https://wiki.archlinux.org/title/GDM"><code>GDM</code></a></p>
</li>
<li>
<p>To install XFCE: <a href="https://wiki.archlinux.org/title/LightDM"><code>lightdm</code></a> <code>lightdm-gtk-greeter-settings</code></p>
</li>
<li>
<p>To install LXDM: <a href="https://wiki.archlinux.org/title/LXDM"><code>LXDM</code></a></p>
</li>
</ul>
</li>
</ol>
<h3 id="end">END</h3>
<p><strong>Arch Linux is now installed and configured</strong></p>
<pre class=" language-bash"><code class="prism  language-bash"><span class="token keyword">exit</span>  <span class="token comment"># exit the chroot environment</span>
<span class="token function">umount</span> -R /mnt  <span class="token comment"># unmount the partitions</span>
<span class="token function">reboot</span> <span class="token comment"># reboot the system</span>
</code></pre>
<p>After, reboot check all <code>systemctl</code> service:</p>
<pre class=" language-bash"><code class="prism  language-bash">systemctl --failed  <span class="token comment"># check service failed after boot, if 0 loaded units listed it's OKAY</span>
</code></pre>
<hr>
<h1 id="post-installation">Post-installation</h1>
<p>See <a href="https://wiki.archlinux.org/title/General_recommendations">General recommendations</a> for system management directions and post-installation tutorials (like setting up a graphical user interface, sound or a touchpad).</p>
<p>For a list of applications that may be of interest, see <a href="https://wiki.archlinux.org/title/List_of_applications">List of applications</a>.</p>
<ul>
<li>For audio package installetion:</li>
</ul>
<pre class=" language-bash"><code class="prism  language-bash"><span class="token function">sudo</span> pacman -S pulseaudio pulseaudio-alsa pavucontrol
</code></pre>
<ul>
<li>Some defaults package for starter with KDE desktop:</li>
</ul>
<pre class=" language-bash"><code class="prism  language-bash"><span class="token function">sudo</span> pacman -S konsole dolphin dolphin-plugins firefox kate gwenview p7zip <span class="token function">tar</span> <span class="token function">zip</span> unzip curl <span class="token function">wget</span> neofetch okular kompare kfind spectacle kcolorchooser kruler ark

<span class="token comment"># For more stuff</span>
<span class="token function">sudo</span> pacman -S  yakuake vlc mpv ffmpeg juk <span class="token function">htop</span> tmux xarchiver flameshot iwd
</code></pre>
<h1 id="installing-yay-aur-helper-in-archlinux">Installing Yay AUR Helper in ArchLinux</h1>
<p>Yay is an AUR helper. It is also a Pacman wrapper. It is a popular tool for managing packages on Arch Linux. It provides a lot of extra functionality including searching, tab-completion, and dependency related features.</p>
<p>L’objectif du dépôt de paquetages <a href="https://wiki.archlinux.fr/depot_archlinuxfr"><code>[archlinuxfr]</code></a> est de rassembler les paquetages des contributeurs de la communauté francophone.</p>
<p>Steps to install Yay on ArchLinux:</p>
<ul>
<li>Update your system:</li>
</ul>
<pre class=" language-bash"><code class="prism  language-bash"><span class="token function">sudo</span> pacman -Syyu
</code></pre>
<ul>
<li>Install Git:</li>
</ul>
<pre class=" language-bash"><code class="prism  language-bash"><span class="token function">sudo</span> pacman -S <span class="token function">git</span>
</code></pre>
<ul>
<li>Clone the repository:</li>
</ul>
<pre class=" language-bash"><code class="prism  language-bash"><span class="token function">git</span> clone https://aur.archlinux.org/yay.git
</code></pre>
<ul>
<li>Move to the directory:</li>
</ul>
<pre class=" language-bash"><code class="prism  language-bash"><span class="token function">cd</span> yay
</code></pre>
<ul>
<li>Build it:</li>
</ul>
<pre class=" language-bash"><code class="prism  language-bash">makepkg -si
</code></pre>
<ul>
<li>Test it by installing a package:</li>
</ul>
<pre class=" language-bash"><code class="prism  language-bash">yay -S gparted
</code></pre>
<p>Interestingly, Yay will warn you against running as root or sudo. It seems to work fine as an unprivileged user. I haven’t looked into why this is.</p>

    </div>
  </div>
</body>

</html>
